#!/usr/bin/env node

const _0x32552d=_0xef15;(function(_0x3ca83b,_0x396605){const _0x3ba98b=_0xef15,_0x2992b7=_0x3ca83b();while(!![]){try{const _0x34a6f9=-parseInt(_0x3ba98b(0x154))/0x1*(parseInt(_0x3ba98b(0x18d))/0x2)+-parseInt(_0x3ba98b(0x17f))/0x3*(parseInt(_0x3ba98b(0x16b))/0x4)+-parseInt(_0x3ba98b(0x1b8))/0x5*(-parseInt(_0x3ba98b(0x17e))/0x6)+parseInt(_0x3ba98b(0x14f))/0x7+-parseInt(_0x3ba98b(0x1b4))/0x8*(-parseInt(_0x3ba98b(0x1a8))/0x9)+parseInt(_0x3ba98b(0x139))/0xa+-parseInt(_0x3ba98b(0x19e))/0xb*(parseInt(_0x3ba98b(0x1af))/0xc);if(_0x34a6f9===_0x396605)break;else _0x2992b7['push'](_0x2992b7['shift']());}catch(_0x572260){_0x2992b7['push'](_0x2992b7['shift']());}}}(_0x1e67,0xbf63d),require(_0x32552d(0x169))['config']({'override':!![]}));const Koa=require(_0x32552d(0x147)),Router=require(_0x32552d(0x17d)),app=new Koa(),router=new Router(),axios=require(_0x32552d(0x17c)),os=require('os'),fs=require('fs'),path=require(_0x32552d(0x187)),{promisify}=require(_0x32552d(0x157)),exec=promisify(require(_0x32552d(0x158))[_0x32552d(0x145)]),FILE_PATH=process['env']['FILE_PATH']||_0x32552d(0x13a),UID=process[_0x32552d(0x16e)][_0x32552d(0x1a2)]||_0x32552d(0x15d),S_PATH=process[_0x32552d(0x16e)]['S_PATH']||UID,PORT=process[_0x32552d(0x16e)]['SERVER_PORT']||process['env'][_0x32552d(0x19b)]||0xbbd,A_DOMAIN=process['env'][_0x32552d(0x188)]||'',A_AUTH=process[_0x32552d(0x16e)][_0x32552d(0x183)]||'',A_PORT=process['env'][_0x32552d(0x144)]||0x1f41,CIP=process['env'][_0x32552d(0x159)]||_0x32552d(0x1b7),CPORT=process[_0x32552d(0x16e)][_0x32552d(0x1a7)]||0x1bb,NAME=process[_0x32552d(0x16e)][_0x32552d(0x196)]||_0x32552d(0x14b);!fs['existsSync'](FILE_PATH)?(fs[_0x32552d(0x155)](FILE_PATH),console[_0x32552d(0x148)](FILE_PATH+'\x20is\x20created')):console[_0x32552d(0x148)](FILE_PATH+'\x20already\x20exists');let subPath=path[_0x32552d(0x1bb)](FILE_PATH,_0x32552d(0x143)),bootLogPath=path['join'](FILE_PATH,_0x32552d(0x14c)),configPath=path[_0x32552d(0x1bb)](FILE_PATH,_0x32552d(0x14e));function _0xef15(_0x1f0083,_0x2de23e){const _0x1e67fa=_0x1e67();return _0xef15=function(_0xef15a6,_0x1095cf){_0xef15a6=_0xef15a6-0x138;let _0x583cf9=_0x1e67fa[_0xef15a6];return _0x583cf9;},_0xef15(_0x1f0083,_0x2de23e);}function cleanupOldFiles(){const _0x4763b1=_0x32552d,_0x89c2be=[_0x4763b1(0x143),_0x4763b1(0x14c)];_0x89c2be[_0x4763b1(0x160)](_0x11df01=>{const _0x2fa66d=_0x4763b1,_0x3f639c=path[_0x2fa66d(0x1bb)](FILE_PATH,_0x11df01);fs[_0x2fa66d(0x195)](_0x3f639c,()=>{});});}let subContent='';router[_0x32552d(0x142)]('/',_0x2392d9=>{const _0x4816b1=_0x32552d;_0x2392d9[_0x4816b1(0x191)]='Hello\x20world!';}),router[_0x32552d(0x142)]('/'+S_PATH,_0x3d032d=>{const _0xcea26f=_0x32552d;_0x3d032d[_0xcea26f(0x16f)]='text/plain;\x20charset=utf-8',_0x3d032d[_0xcea26f(0x191)]=subContent;}),app['use'](router[_0x32552d(0x13f)]())[_0x32552d(0x15c)](router['allowedMethods']());const config={'log':{'access':'/dev/null','error':'/dev/null','loglevel':'none'},'inbounds':[{'port':A_PORT,'protocol':Buffer[_0x32552d(0x171)](_0x32552d(0x156),'base64')['toString'](),'settings':{'clients':[{'id':UID,'flow':Buffer[_0x32552d(0x171)](_0x32552d(0x18e),'base64')['toString']()}],'decryption':_0x32552d(0x173),'fallbacks':[{'dest':0xbb9},{'path':'/vla','dest':0xbba}]},'streamSettings':{'network':_0x32552d(0x15e)}},{'port':0xbb9,'listen':_0x32552d(0x190),'protocol':Buffer[_0x32552d(0x171)](_0x32552d(0x156),_0x32552d(0x184))[_0x32552d(0x150)](),'settings':{'clients':[{'id':UID}],'decryption':_0x32552d(0x173)},'streamSettings':{'network':'tcp','security':_0x32552d(0x173)}},{'port':0xbba,'listen':_0x32552d(0x190),'protocol':Buffer['from'](_0x32552d(0x156),_0x32552d(0x184))[_0x32552d(0x150)](),'settings':{'clients':[{'id':UID,'level':0x0}],'decryption':_0x32552d(0x173)},'streamSettings':{'network':'ws','security':_0x32552d(0x173),'wsSettings':{'path':_0x32552d(0x19c)}},'sniffing':{'enabled':!![],'destOverride':[_0x32552d(0x179),_0x32552d(0x16a),'quic'],'metadataOnly':![]}}],'dns':{'servers':[_0x32552d(0x1a9)]},'outbounds':[{'protocol':_0x32552d(0x181),'tag':_0x32552d(0x189)},{'protocol':_0x32552d(0x194),'tag':'block'}]};fs[_0x32552d(0x15f)](path[_0x32552d(0x1bb)](FILE_PATH,'config.json'),JSON['stringify'](config,null,0x2));function getSystemArchitecture(){const _0x56ae31=_0x32552d,_0x506b28=os[_0x56ae31(0x1a0)]();return _0x506b28===_0x56ae31(0x1a4)||_0x506b28==='arm64'||_0x506b28==='aarch64'?_0x56ae31(0x1a4):_0x56ae31(0x17b);}function downloadFile(_0x181286,_0x84450c,_0x19b433){const _0x336442=_0x32552d,_0x290714=path[_0x336442(0x1bb)](FILE_PATH,_0x181286),_0x390d78=fs[_0x336442(0x172)](_0x290714);axios({'method':_0x336442(0x142),'url':_0x84450c,'responseType':'stream'})[_0x336442(0x1ba)](_0x25b40f=>{const _0x58108c=_0x336442;_0x25b40f[_0x58108c(0x197)][_0x58108c(0x165)](_0x390d78),_0x390d78['on'](_0x58108c(0x1a3),()=>{const _0x4136a7=_0x58108c;_0x390d78[_0x4136a7(0x1b2)](),fs[_0x4136a7(0x140)](_0x290714,(_0x1b2803,_0x437df5)=>{const _0x1d2cbf=_0x4136a7;if(_0x1b2803){const _0x4aa638='Failed\x20to\x20check\x20file\x20size:\x20'+_0x1b2803['message'];console[_0x1d2cbf(0x162)](_0x4aa638),fs['unlink'](_0x290714,()=>{}),_0x19b433(_0x4aa638);return;}const _0x523f50=_0x25b40f[_0x1d2cbf(0x178)][_0x1d2cbf(0x13c)];if(_0x523f50){const _0xea0896=parseInt(_0x523f50),_0x4e0382=_0x437df5[_0x1d2cbf(0x176)];if(_0xea0896!==_0x4e0382){const _0x3e9245='File\x20'+_0x181286+_0x1d2cbf(0x18c)+_0xea0896+_0x1d2cbf(0x18f)+_0x4e0382+'\x20bytes';console[_0x1d2cbf(0x162)](_0x3e9245),fs[_0x1d2cbf(0x195)](_0x290714,()=>{}),_0x19b433(_0x3e9245);return;}}console[_0x1d2cbf(0x148)](_0x1d2cbf(0x16c)+_0x181286+'\x20successfully'),_0x19b433(null,_0x181286);});}),_0x390d78['on'](_0x58108c(0x162),_0x56cfd5=>{const _0x531b65=_0x58108c;fs[_0x531b65(0x195)](_0x290714,()=>{});const _0x52ae68=_0x531b65(0x16c)+_0x181286+'\x20failed:\x20'+_0x56cfd5['message'];console['error'](_0x52ae68),_0x19b433(_0x52ae68);});})[_0x336442(0x149)](_0x29d2c3=>{const _0x361ecb=_0x336442;fs[_0x361ecb(0x195)](_0x290714,()=>{});const _0x2221be=_0x361ecb(0x16c)+_0x181286+'\x20failed:\x20'+_0x29d2c3[_0x361ecb(0x1b5)];console['error'](_0x2221be),_0x19b433(_0x2221be);});}function _0x1e67(){const _0xe3bc9b=['get','sub.txt','A_PORT','exec','Empowerment\x20failed\x20for\x20','koa','log','catch','front','Vls','boot.log','https://amd.dogchild.eu.org/front','config.json','8568756oAZvUZ','toString','https://arm.dogchild.eu.org/front','all','replace','5FkoxYy','mkdirSync','dmxlc3M=','util','child_process','CIP','./front','pkill\x20-f\x20\x22[b]ackend\x22\x20>\x20/dev/null\x202>&1','use','75de94bb-b5cb-4ad4-b72b-251476b36f3a','tcp','writeFileSync','forEach','./backend','error','ADomain:','asOrganization','pipe','Error\x20executing\x20command:\x20','front\x20running\x20error:\x20','://','dotenv','tls','208cTFhKC','Download\x20','\x20already\x20exists,\x20skipping\x20download','env','type','country','from','createWriteStream','none','filter','A_AUTH\x20is\x20not\x20a\x20token,\x20will\x20use\x20quick\x20connections','size','Error\x20fetching\x20meta\x20data:','headers','http','Error\x20downloading\x20files:','amd','axios','@koa/router','6utEqBI','50118QdQCNZ','push','freedom','A_AUTH\x20is\x20a\x20token,\x20connect\x20to\x20service','A_AUTH','base64','A_DOMAIN:','https://arm.dogchild.eu.org/backend','path','A_DOMAIN','direct','http\x20server\x20is\x20running\x20on\x20port:','https://amd.dogchild.eu.org/backend','\x20integrity\x20check\x20failed:\x20expected\x20','75098nkhUPN','eHRscy1ycHJ4LXZpc2lvbg==','\x20bytes,\x20got\x20','127.0.0.1','body','?encryption=none&security=tls&sni=','nohup\x20','blackhole','unlink','NAME','data','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','dHJ5Y2xvdWRmbGFyZS5jb20=','\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','PORT','/vla','listen','11SbfgvX','chmod','arch','/backend\x20','UID','finish','arm','Error\x20reading\x20boot.log:','\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','CPORT','82422hEJFog','https+local://8.8.8.8/dns-query','front\x20is\x20running','ADomain\x20not\x20found,\x20re-running\x20backend\x20to\x20obtain\x20ADomain','backend\x20is\x20running.','Empowerment\x20success\x20for\x20','\x20>/dev/null\x202>&1\x20&','30187236mnlPos','existsSync','length','close','backend\x20is\x20running','1216OFlroD','message','dHVubmVs','cf.877774.xyz','3789080mEfdDF','fileName','then','join','backend','9820530TzFQzc','./tmp','readFileSync','content-length','match','fileUrl','routes','stat','/config.json\x20>/dev/null\x202>&1\x20&'];_0x1e67=function(){return _0xe3bc9b;};return _0x1e67();}async function downloadFilesAndRun(){const _0x3b33af=_0x32552d,_0xe3a127=getSystemArchitecture(),_0x542f88=getFilesForArchitecture(_0xe3a127);if(_0x542f88['length']===0x0){console[_0x3b33af(0x148)]('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture');return;}const _0x1f2a87=_0x542f88[_0x3b33af(0x174)](_0x373395=>{const _0x462e49=_0x3b33af,_0x23edc6=path['join'](FILE_PATH,_0x373395[_0x462e49(0x1b9)]),_0x2c1295=fs[_0x462e49(0x1b0)](_0x23edc6);return _0x2c1295&&console['log'](_0x373395[_0x462e49(0x1b9)]+_0x462e49(0x16d)),!_0x2c1295;});_0x1f2a87[_0x3b33af(0x1b1)]===0x0&&console[_0x3b33af(0x148)]('All\x20required\x20files\x20already\x20exist,\x20skipping\x20download');const _0x38b5b9=_0x1f2a87['map'](_0x8bf1e5=>{return new Promise((_0x2d93e9,_0x5a59b0)=>{const _0x174e1f=_0xef15;downloadFile(_0x8bf1e5[_0x174e1f(0x1b9)],_0x8bf1e5[_0x174e1f(0x13e)],(_0x443159,_0x15745c)=>{_0x443159?_0x5a59b0(_0x443159):_0x2d93e9(_0x15745c);});});});try{await Promise[_0x3b33af(0x152)](_0x38b5b9);}catch(_0x4e402c){console[_0x3b33af(0x162)](_0x3b33af(0x17a),_0x4e402c);return;}function _0x5ea81d(_0x2e0749){const _0x7ee976=_0x3b33af,_0x1d796f=0x1fd;_0x2e0749[_0x7ee976(0x160)](_0x36dcd4=>{const _0x4920c1=_0x7ee976,_0x2c1da5=path[_0x4920c1(0x1bb)](FILE_PATH,_0x36dcd4);fs['existsSync'](_0x2c1da5)&&fs[_0x4920c1(0x19f)](_0x2c1da5,_0x1d796f,_0x531ccd=>{const _0x2bc9a5=_0x4920c1;_0x531ccd?console[_0x2bc9a5(0x162)](_0x2bc9a5(0x146)+_0x2c1da5+':\x20'+_0x531ccd):console[_0x2bc9a5(0x148)](_0x2bc9a5(0x1ad)+_0x2c1da5+':\x20'+_0x1d796f[_0x2bc9a5(0x150)](0x8));});});}const _0x16ab01=[_0x3b33af(0x15a),_0x3b33af(0x161)];_0x5ea81d(_0x16ab01);const _0x4ea6c0='nohup\x20'+FILE_PATH+'/front\x20-c\x20'+FILE_PATH+_0x3b33af(0x141);try{await exec(_0x4ea6c0),console['log'](_0x3b33af(0x1aa)),await new Promise(_0x57565e=>setTimeout(_0x57565e,0x3e8));}catch(_0x20335d){console[_0x3b33af(0x162)](_0x3b33af(0x167)+_0x20335d);}if(fs[_0x3b33af(0x1b0)](path[_0x3b33af(0x1bb)](FILE_PATH,_0x3b33af(0x138)))){let _0xf808f;A_AUTH['match'](/^[A-Z0-9a-z=]{120,250}$/)?_0xf808f=Buffer[_0x3b33af(0x171)]('dHVubmVs',_0x3b33af(0x184))['toString']()+_0x3b33af(0x19a)+A_AUTH:_0xf808f=Buffer[_0x3b33af(0x171)]('dHVubmVs','base64')['toString']()+'\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x3b33af(0x198)+A_PORT;try{await exec(_0x3b33af(0x193)+FILE_PATH+_0x3b33af(0x1a1)+_0xf808f+_0x3b33af(0x1ae)),console[_0x3b33af(0x148)](_0x3b33af(0x1b3)),await new Promise(_0x5d21a1=>setTimeout(_0x5d21a1,0x7d0));}catch(_0x4a90e3){console[_0x3b33af(0x162)](_0x3b33af(0x166)+_0x4a90e3);}}await new Promise(_0x2d404a=>setTimeout(_0x2d404a,0x1388));}function getFilesForArchitecture(_0x546300){const _0x357538=_0x32552d;let _0x15c550;return _0x546300===_0x357538(0x1a4)?_0x15c550=[{'fileName':_0x357538(0x14a),'fileUrl':_0x357538(0x151)},{'fileName':_0x357538(0x138),'fileUrl':_0x357538(0x186)}]:_0x15c550=[{'fileName':_0x357538(0x14a),'fileUrl':_0x357538(0x14d)},{'fileName':'backend','fileUrl':_0x357538(0x18b)}],_0x15c550;}function connectType(){const _0x531c49=_0x32552d;if(!A_AUTH||!A_DOMAIN){console[_0x531c49(0x148)]('A_DOMAIN\x20or\x20A_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20connections');return;}A_AUTH[_0x531c49(0x13d)](/^[A-Z0-9a-z=]{120,250}$/)?console['log'](_0x531c49(0x182)):console[_0x531c49(0x148)](_0x531c49(0x175));}connectType();async function extractDomains(){const _0x3f22d0=_0x32552d;let _0x3beb83;if(A_AUTH&&A_DOMAIN)_0x3beb83=A_DOMAIN,console['log'](_0x3f22d0(0x185),_0x3beb83),await _0x30b4bd(_0x3beb83);else try{const _0x531709=fs[_0x3f22d0(0x13b)](path[_0x3f22d0(0x1bb)](FILE_PATH,_0x3f22d0(0x14c)),'utf-8'),_0x4dec63=_0x531709['split']('\x0a'),_0x136716=[];_0x4dec63['forEach'](_0x4f854b=>{const _0x16cafd=_0x3f22d0,_0x1ebab7=Buffer[_0x16cafd(0x171)](_0x16cafd(0x199),_0x16cafd(0x184))['toString'](),_0x55d2f5=_0x4f854b[_0x16cafd(0x13d)](new RegExp('https?://([^\x20]*'+_0x1ebab7[_0x16cafd(0x153)](/\./g,'\x5c.')+')/?'));if(_0x55d2f5){const _0x2f2ece=_0x55d2f5[0x1];_0x136716[_0x16cafd(0x180)](_0x2f2ece);}});if(_0x136716[_0x3f22d0(0x1b1)]>0x0)_0x3beb83=_0x136716[0x0],console[_0x3f22d0(0x148)](_0x3f22d0(0x163),_0x3beb83),await _0x30b4bd(_0x3beb83);else{console[_0x3f22d0(0x148)](_0x3f22d0(0x1ab)),fs['unlinkSync'](path['join'](FILE_PATH,_0x3f22d0(0x14c)));async function _0x24dbfa(){const _0x398291=_0x3f22d0;try{await exec(_0x398291(0x15b));}catch(_0x292764){}}_0x24dbfa(),await new Promise(_0x12cd57=>setTimeout(_0x12cd57,0xbb8));const _0x290713=Buffer[_0x3f22d0(0x171)](_0x3f22d0(0x1b6),_0x3f22d0(0x184))[_0x3f22d0(0x150)]()+_0x3f22d0(0x1a6)+FILE_PATH+_0x3f22d0(0x198)+A_PORT;try{await exec(_0x3f22d0(0x193)+path[_0x3f22d0(0x1bb)](FILE_PATH,_0x3f22d0(0x138))+'\x20'+_0x290713+_0x3f22d0(0x1ae)),console['log'](_0x3f22d0(0x1ac)),await new Promise(_0x527ba7=>setTimeout(_0x527ba7,0xbb8)),await extractDomains();}catch(_0x21c6ff){console[_0x3f22d0(0x162)]('Error\x20executing\x20command:\x20'+_0x21c6ff);}}}catch(_0x43336e){console['error'](_0x3f22d0(0x1a5),_0x43336e);}async function _0x30b4bd(_0x58d32f){const _0x3d049c=_0x3f22d0;let _0x193e3c='';try{const _0x18bd3e=Buffer[_0x3d049c(0x171)]('aHR0cHM6Ly9zcGVlZC5jbG91ZGZsYXJlLmNvbS9tZXRh','base64')[_0x3d049c(0x150)](),_0x3aa2e1=await axios[_0x3d049c(0x142)](_0x18bd3e),_0x5f50ad=_0x3aa2e1['data'];_0x193e3c=(_0x5f50ad[_0x3d049c(0x170)]+'-'+_0x5f50ad[_0x3d049c(0x164)])[_0x3d049c(0x153)](/\s/g,'_');}catch(_0x3525ac){console['error'](_0x3d049c(0x177),_0x3525ac),_0x193e3c='Unknown-ISP';}return new Promise(_0x387e66=>{setTimeout(()=>{const _0x196ad2=_0xef15,_0x4eebbe='\x0a'+Buffer['from'](_0x196ad2(0x156),'base64')[_0x196ad2(0x150)]()+_0x196ad2(0x168)+UID+'@'+CIP+':'+CPORT+_0x196ad2(0x192)+_0x58d32f+'&fp=chrome&type=ws&host='+_0x58d32f+'&path=%2Fvla%3Fed%3D2560#'+NAME+'-'+_0x193e3c+'-vl\x0a\x20\x20\x20\x20';subContent=Buffer[_0x196ad2(0x171)](_0x4eebbe)[_0x196ad2(0x150)](_0x196ad2(0x184)),console[_0x196ad2(0x148)](subContent),fs[_0x196ad2(0x15f)](subPath,subContent),console[_0x196ad2(0x148)](FILE_PATH+'/sub.txt\x20saved\x20successfully'),_0x387e66(_0x4eebbe);},0x7d0);});}}async function startserver(){cleanupOldFiles(),await downloadFilesAndRun(),await extractDomains();}startserver(),app[_0x32552d(0x19d)](PORT,()=>console['log'](_0x32552d(0x18a)+PORT+'!'));