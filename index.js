#!/usr/bin/env node

const _0x2d14be=_0x1c2e;(function(_0xb41974,_0x3d5fc2){const _0x59c1e8=_0x1c2e,_0x5ce894=_0xb41974();while(!![]){try{const _0x57cd67=parseInt(_0x59c1e8(0x1b1))/0x1*(-parseInt(_0x59c1e8(0x1c0))/0x2)+parseInt(_0x59c1e8(0x20a))/0x3*(-parseInt(_0x59c1e8(0x208))/0x4)+-parseInt(_0x59c1e8(0x1fb))/0x5*(parseInt(_0x59c1e8(0x1d7))/0x6)+-parseInt(_0x59c1e8(0x1aa))/0x7*(parseInt(_0x59c1e8(0x1f1))/0x8)+parseInt(_0x59c1e8(0x1fe))/0x9+parseInt(_0x59c1e8(0x201))/0xa*(parseInt(_0x59c1e8(0x19a))/0xb)+parseInt(_0x59c1e8(0x19c))/0xc*(parseInt(_0x59c1e8(0x1ac))/0xd);if(_0x57cd67===_0x3d5fc2)break;else _0x5ce894['push'](_0x5ce894['shift']());}catch(_0x52520a){_0x5ce894['push'](_0x5ce894['shift']());}}}(_0x5d71,0x74749),require('dotenv')[_0x2d14be(0x1ee)]({'override':!![]}));const Koa=require(_0x2d14be(0x20f)),Router=require(_0x2d14be(0x1d0)),app=new Koa(),router=new Router(),axios=require(_0x2d14be(0x1d4)),os=require('os'),fs=require('fs'),path=require(_0x2d14be(0x213)),{promisify}=require('util'),exec=promisify(require(_0x2d14be(0x203))[_0x2d14be(0x1e2)]),FILE_PATH=process['env'][_0x2d14be(0x1f4)]||_0x2d14be(0x219),UID=process[_0x2d14be(0x216)][_0x2d14be(0x21d)]||_0x2d14be(0x1dc),S_PATH=process[_0x2d14be(0x216)]['S_PATH']||UID,PORT=process[_0x2d14be(0x216)][_0x2d14be(0x1fa)]||process[_0x2d14be(0x216)][_0x2d14be(0x1dd)]||0xbbd,A_DOMAIN=process[_0x2d14be(0x216)][_0x2d14be(0x1d1)]||'',A_AUTH=process[_0x2d14be(0x216)][_0x2d14be(0x1f7)]||'',A_PORT=process[_0x2d14be(0x216)][_0x2d14be(0x21c)]||0x1f41,CIP=process[_0x2d14be(0x216)][_0x2d14be(0x1a4)]||_0x2d14be(0x1c6),CPORT=process[_0x2d14be(0x216)][_0x2d14be(0x1ff)]||0x1bb,NAME=process['env'][_0x2d14be(0x1a0)]||_0x2d14be(0x1cd);!fs[_0x2d14be(0x20c)](FILE_PATH)?(fs['mkdirSync'](FILE_PATH),console[_0x2d14be(0x1a6)](FILE_PATH+'\x20is\x20created')):console[_0x2d14be(0x1a6)](FILE_PATH+_0x2d14be(0x210));let subPath=path[_0x2d14be(0x1e9)](FILE_PATH,_0x2d14be(0x1a1)),bootLogPath=path[_0x2d14be(0x1e9)](FILE_PATH,_0x2d14be(0x19d)),configPath=path[_0x2d14be(0x1e9)](FILE_PATH,'config.json');function cleanupOldFiles(){const _0x2bbed9=_0x2d14be,_0x285834=[_0x2bbed9(0x1a1),'boot.log'];_0x285834['forEach'](_0x7fddc0=>{const _0x319b53=_0x2bbed9,_0x51a762=path[_0x319b53(0x1e9)](FILE_PATH,_0x7fddc0);fs[_0x319b53(0x1f8)](_0x51a762,()=>{});});}let subContent='';router[_0x2d14be(0x200)]('/',_0x23ea85=>{const _0x41fe2c=_0x2d14be;_0x23ea85[_0x41fe2c(0x1ca)]=_0x41fe2c(0x1be);}),router[_0x2d14be(0x200)]('/'+S_PATH,_0x4aab36=>{const _0x591a28=_0x2d14be;_0x4aab36['type']=_0x591a28(0x1d5),_0x4aab36[_0x591a28(0x1ca)]=subContent;}),app[_0x2d14be(0x1de)](router[_0x2d14be(0x205)]())[_0x2d14be(0x1de)](router[_0x2d14be(0x19e)]());const config={'log':{'access':_0x2d14be(0x1f3),'error':_0x2d14be(0x1f3),'loglevel':'none'},'inbounds':[{'port':A_PORT,'protocol':Buffer[_0x2d14be(0x1e8)](_0x2d14be(0x1a9),_0x2d14be(0x197))['toString'](),'settings':{'clients':[{'id':UID,'flow':Buffer[_0x2d14be(0x1e8)]('eHRscy1ycHJ4LXZpc2lvbg==',_0x2d14be(0x197))[_0x2d14be(0x1b8)]()}],'decryption':_0x2d14be(0x1ed),'fallbacks':[{'dest':0xbb9},{'path':_0x2d14be(0x1cf),'dest':0xbba}]},'streamSettings':{'network':'tcp'}},{'port':0xbb9,'listen':'127.0.0.1','protocol':Buffer[_0x2d14be(0x1e8)](_0x2d14be(0x1a9),'base64')[_0x2d14be(0x1b8)](),'settings':{'clients':[{'id':UID}],'decryption':_0x2d14be(0x1ed)},'streamSettings':{'network':'tcp','security':'none'}},{'port':0xbba,'listen':_0x2d14be(0x196),'protocol':Buffer[_0x2d14be(0x1e8)](_0x2d14be(0x1a9),_0x2d14be(0x197))[_0x2d14be(0x1b8)](),'settings':{'clients':[{'id':UID,'level':0x0}],'decryption':'none'},'streamSettings':{'network':'ws','security':_0x2d14be(0x1ed),'wsSettings':{'path':'/vla'}},'sniffing':{'enabled':!![],'destOverride':[_0x2d14be(0x1bf),_0x2d14be(0x1c1),_0x2d14be(0x1bc)],'metadataOnly':![]}}],'dns':{'servers':['https+local://8.8.8.8/dns-query']},'outbounds':[{'protocol':_0x2d14be(0x1c2),'tag':_0x2d14be(0x1cb)},{'protocol':_0x2d14be(0x1da),'tag':_0x2d14be(0x1e7)}]};fs[_0x2d14be(0x1fd)](path[_0x2d14be(0x1e9)](FILE_PATH,_0x2d14be(0x198)),JSON[_0x2d14be(0x1c7)](config,null,0x2));function getSystemArchitecture(){const _0x5db3fe=_0x2d14be,_0x5e762f=os[_0x5db3fe(0x1b2)]();return _0x5e762f===_0x5db3fe(0x1f5)||_0x5e762f===_0x5db3fe(0x20e)||_0x5e762f===_0x5db3fe(0x20d)?_0x5db3fe(0x1f5):_0x5db3fe(0x1d8);}function downloadFile(_0x574563,_0x512e5c,_0x1b698){const _0x3b35a7=_0x2d14be,_0x22096e=path[_0x3b35a7(0x1e9)](FILE_PATH,_0x574563),_0x1b5e15=fs[_0x3b35a7(0x206)](_0x22096e);axios({'method':_0x3b35a7(0x200),'url':_0x512e5c,'responseType':_0x3b35a7(0x21b)})['then'](_0x526743=>{const _0x3c373d=_0x3b35a7;_0x526743[_0x3c373d(0x1a8)][_0x3c373d(0x1ec)](_0x1b5e15),_0x1b5e15['on']('finish',()=>{const _0x35865a=_0x3c373d;_0x1b5e15[_0x35865a(0x217)](),fs['stat'](_0x22096e,(_0x2540ba,_0x4093f8)=>{const _0x4eb7ba=_0x35865a;if(_0x2540ba){const _0x4ef958=_0x4eb7ba(0x19f)+_0x2540ba[_0x4eb7ba(0x202)];console[_0x4eb7ba(0x1e6)](_0x4ef958),fs[_0x4eb7ba(0x1f8)](_0x22096e,()=>{}),_0x1b698(_0x4ef958);return;}const _0x4d1896=_0x526743['headers'][_0x4eb7ba(0x212)];if(_0x4d1896){const _0x409a0a=parseInt(_0x4d1896),_0x3b3d2f=_0x4093f8[_0x4eb7ba(0x1e3)];if(_0x409a0a!==_0x3b3d2f){const _0x37252b='File\x20'+_0x574563+_0x4eb7ba(0x1f6)+_0x409a0a+_0x4eb7ba(0x1b0)+_0x3b3d2f+'\x20bytes';console['error'](_0x37252b),fs[_0x4eb7ba(0x1f8)](_0x22096e,()=>{}),_0x1b698(_0x37252b);return;}}console[_0x4eb7ba(0x1a6)]('Download\x20'+_0x574563+'\x20successfully'),_0x1b698(null,_0x574563);});}),_0x1b5e15['on'](_0x3c373d(0x1e6),_0x26aeaa=>{const _0x73b10c=_0x3c373d;fs['unlink'](_0x22096e,()=>{});const _0x1a7e66='Download\x20'+_0x574563+_0x73b10c(0x19b)+_0x26aeaa[_0x73b10c(0x202)];console[_0x73b10c(0x1e6)](_0x1a7e66),_0x1b698(_0x1a7e66);});})[_0x3b35a7(0x211)](_0x854d12=>{const _0x3e80ac=_0x3b35a7;fs['unlink'](_0x22096e,()=>{});const _0x5b6494=_0x3e80ac(0x1a2)+_0x574563+_0x3e80ac(0x19b)+_0x854d12[_0x3e80ac(0x202)];console['error'](_0x5b6494),_0x1b698(_0x5b6494);});}async function downloadFilesAndRun(){const _0x68349a=_0x2d14be,_0x2e9036=getSystemArchitecture(),_0x5d31f5=getFilesForArchitecture(_0x2e9036);if(_0x5d31f5[_0x68349a(0x1a3)]===0x0){console['log'](_0x68349a(0x1c9));return;}const _0x8bce29=_0x5d31f5['filter'](_0x20514b=>{const _0x204e6a=_0x68349a,_0x1ea34f=path[_0x204e6a(0x1e9)](FILE_PATH,_0x20514b[_0x204e6a(0x1ba)]),_0x8140a3=fs[_0x204e6a(0x20c)](_0x1ea34f);return _0x8140a3&&console[_0x204e6a(0x1a6)](_0x20514b['fileName']+'\x20already\x20exists,\x20skipping\x20download'),!_0x8140a3;});_0x8bce29[_0x68349a(0x1a3)]===0x0&&console[_0x68349a(0x1a6)](_0x68349a(0x1b6));const _0x170a3a=_0x8bce29['map'](_0x3c7f11=>{return new Promise((_0x5aefe9,_0x5c4ca8)=>{const _0x4a850c=_0x1c2e;downloadFile(_0x3c7f11[_0x4a850c(0x1ba)],_0x3c7f11[_0x4a850c(0x1b7)],(_0x389b02,_0x3ba7ec)=>{_0x389b02?_0x5c4ca8(_0x389b02):_0x5aefe9(_0x3ba7ec);});});});try{await Promise['all'](_0x170a3a);}catch(_0x763d08){console[_0x68349a(0x1e6)](_0x68349a(0x1f2),_0x763d08);return;}function _0x587a92(_0x18c7f6){const _0x24c9f6=_0x68349a,_0x18ffa7=0x1fd;_0x18c7f6[_0x24c9f6(0x21a)](_0x3894ea=>{const _0x29ddd8=path['join'](FILE_PATH,_0x3894ea);fs['existsSync'](_0x29ddd8)&&fs['chmod'](_0x29ddd8,_0x18ffa7,_0x336e0d=>{const _0x50e306=_0x1c2e;_0x336e0d?console[_0x50e306(0x1e6)](_0x50e306(0x1fc)+_0x29ddd8+':\x20'+_0x336e0d):console[_0x50e306(0x1a6)](_0x50e306(0x1b3)+_0x29ddd8+':\x20'+_0x18ffa7[_0x50e306(0x1b8)](0x8));});});}const _0x39236a=['./front',_0x68349a(0x1ad)];_0x587a92(_0x39236a);const _0x1c8df6='nohup\x20'+FILE_PATH+_0x68349a(0x1a7)+FILE_PATH+_0x68349a(0x1db);try{await exec(_0x1c8df6),console['log'](_0x68349a(0x1e5)),await new Promise(_0x1396c8=>setTimeout(_0x1396c8,0x3e8));}catch(_0x54e05c){console[_0x68349a(0x1e6)]('front\x20running\x20error:\x20'+_0x54e05c);}if(fs[_0x68349a(0x20c)](path[_0x68349a(0x1e9)](FILE_PATH,'backend'))){let _0x3cdd23;A_AUTH[_0x68349a(0x21e)](/^[A-Z0-9a-z=]{120,250}$/)?_0x3cdd23=Buffer[_0x68349a(0x1e8)](_0x68349a(0x1ae),_0x68349a(0x197))[_0x68349a(0x1b8)]()+_0x68349a(0x1d9)+A_AUTH:_0x3cdd23=Buffer[_0x68349a(0x1e8)](_0x68349a(0x1ae),_0x68349a(0x197))[_0x68349a(0x1b8)]()+_0x68349a(0x1c3)+FILE_PATH+_0x68349a(0x204)+A_PORT;try{await exec(_0x68349a(0x1e4)+FILE_PATH+_0x68349a(0x214)+_0x3cdd23+_0x68349a(0x1b5)),console['log'](_0x68349a(0x218)),await new Promise(_0x1fa8aa=>setTimeout(_0x1fa8aa,0x7d0));}catch(_0x2944ab){console[_0x68349a(0x1e6)]('Error\x20executing\x20command:\x20'+_0x2944ab);}}await new Promise(_0x4b8695=>setTimeout(_0x4b8695,0x1388));}function _0x1c2e(_0x2a04fb,_0x283d51){const _0x5d716e=_0x5d71();return _0x1c2e=function(_0x1c2ed8,_0x20acbd){_0x1c2ed8=_0x1c2ed8-0x196;let _0x4e237d=_0x5d716e[_0x1c2ed8];return _0x4e237d;},_0x1c2e(_0x2a04fb,_0x283d51);}function getFilesForArchitecture(_0x2c860f){const _0x20d844=_0x2d14be;let _0x19f563;return _0x2c860f==='arm'?_0x19f563=[{'fileName':'front','fileUrl':_0x20d844(0x1f0)},{'fileName':_0x20d844(0x209),'fileUrl':'https://arm.dogchild.eu.org/backend'}]:_0x19f563=[{'fileName':_0x20d844(0x20b),'fileUrl':_0x20d844(0x1d6)},{'fileName':_0x20d844(0x209),'fileUrl':'https://amd.dogchild.eu.org/backend'}],_0x19f563;}function connectType(){const _0x5ae965=_0x2d14be;if(!A_AUTH||!A_DOMAIN){console[_0x5ae965(0x1a6)](_0x5ae965(0x1ef));return;}A_AUTH['match'](/^[A-Z0-9a-z=]{120,250}$/)?console[_0x5ae965(0x1a6)](_0x5ae965(0x1d2)):console[_0x5ae965(0x1a6)](_0x5ae965(0x1df));}connectType();async function extractDomains(){const _0x3872c2=_0x2d14be;let _0x4bb696;if(A_AUTH&&A_DOMAIN)_0x4bb696=A_DOMAIN,console['log'](_0x3872c2(0x1e0),_0x4bb696),await _0x3a4e43(_0x4bb696);else try{const _0xb26b97=fs['readFileSync'](path[_0x3872c2(0x1e9)](FILE_PATH,_0x3872c2(0x19d)),_0x3872c2(0x1c4)),_0x1aef7f=_0xb26b97[_0x3872c2(0x199)]('\x0a'),_0x59462d=[];_0x1aef7f[_0x3872c2(0x21a)](_0x4c6faa=>{const _0x2e976a=_0x3872c2,_0x4409db=Buffer[_0x2e976a(0x1e8)](_0x2e976a(0x1cc),_0x2e976a(0x197))['toString'](),_0x4cc084=_0x4c6faa[_0x2e976a(0x21e)](new RegExp('https?://([^\x20]*'+_0x4409db[_0x2e976a(0x1ea)](/\./g,'\x5c.')+_0x2e976a(0x1a5)));if(_0x4cc084){const _0x1b11d5=_0x4cc084[0x1];_0x59462d[_0x2e976a(0x207)](_0x1b11d5);}});if(_0x59462d[_0x3872c2(0x1a3)]>0x0)_0x4bb696=_0x59462d[0x0],console[_0x3872c2(0x1a6)](_0x3872c2(0x1b4),_0x4bb696),await _0x3a4e43(_0x4bb696);else{console[_0x3872c2(0x1a6)](_0x3872c2(0x1b9)),fs[_0x3872c2(0x1af)](path[_0x3872c2(0x1e9)](FILE_PATH,_0x3872c2(0x19d)));async function _0x2cb019(){const _0x4579ce=_0x3872c2;try{await exec(_0x4579ce(0x1bd));}catch(_0x23bb64){}}_0x2cb019(),await new Promise(_0x2ee433=>setTimeout(_0x2ee433,0xbb8));const _0x141d2b=Buffer[_0x3872c2(0x1e8)](_0x3872c2(0x1ae),'base64')['toString']()+_0x3872c2(0x1c3)+FILE_PATH+_0x3872c2(0x204)+A_PORT;try{await exec('nohup\x20'+path[_0x3872c2(0x1e9)](FILE_PATH,_0x3872c2(0x209))+'\x20'+_0x141d2b+_0x3872c2(0x1b5)),console[_0x3872c2(0x1a6)](_0x3872c2(0x1c8)),await new Promise(_0xa64826=>setTimeout(_0xa64826,0xbb8)),await extractDomains();}catch(_0xad3cb2){console[_0x3872c2(0x1e6)]('Error\x20executing\x20command:\x20'+_0xad3cb2);}}}catch(_0x5ffeab){console[_0x3872c2(0x1e6)]('Error\x20reading\x20boot.log:',_0x5ffeab);}async function _0x3a4e43(_0xfe6911){const _0x36b933=_0x3872c2;let _0x29f821='';try{const _0x5d1069=Buffer[_0x36b933(0x1e8)]('aHR0cHM6Ly9zcGVlZC5jbG91ZGZsYXJlLmNvbS9tZXRh',_0x36b933(0x197))[_0x36b933(0x1b8)](),_0x47ecfe=await axios['get'](_0x5d1069),_0x5c5e1b=_0x47ecfe['data'];_0x29f821=(_0x5c5e1b['country']+'-'+_0x5c5e1b[_0x36b933(0x1ab)])['replace'](/\s/g,'_');}catch(_0x134c00){console[_0x36b933(0x1e6)](_0x36b933(0x1eb),_0x134c00),_0x29f821='Unknown-ISP';}return new Promise(_0xbacb5b=>{setTimeout(()=>{const _0x3a17b0=_0x1c2e,_0x4d8dd9='\x0a'+Buffer[_0x3a17b0(0x1e8)](_0x3a17b0(0x1a9),_0x3a17b0(0x197))['toString']()+_0x3a17b0(0x1bb)+UID+'@'+CIP+':'+CPORT+_0x3a17b0(0x1f9)+_0xfe6911+_0x3a17b0(0x215)+_0xfe6911+_0x3a17b0(0x1ce)+NAME+'-'+_0x29f821+_0x3a17b0(0x1d3);subContent=Buffer[_0x3a17b0(0x1e8)](_0x4d8dd9)[_0x3a17b0(0x1b8)](_0x3a17b0(0x197)),console[_0x3a17b0(0x1a6)](subContent),fs['writeFileSync'](subPath,subContent),console[_0x3a17b0(0x1a6)](FILE_PATH+_0x3a17b0(0x1c5)),_0xbacb5b(_0x4d8dd9);},0x7d0);});}}async function startserver(){cleanupOldFiles(),await downloadFilesAndRun(),await extractDomains();}function _0x5d71(){const _0x1e3d14=['use','A_AUTH\x20is\x20not\x20a\x20token,\x20will\x20use\x20quick\x20connections','A_DOMAIN:','http\x20server\x20is\x20running\x20on\x20port:','exec','size','nohup\x20','front\x20is\x20running','error','block','from','join','replace','Error\x20fetching\x20meta\x20data:','pipe','none','config','A_DOMAIN\x20or\x20A_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20connections','https://arm.dogchild.eu.org/front','5593984rPtnRC','Error\x20downloading\x20files:','/dev/null','FILE_PATH','arm','\x20integrity\x20check\x20failed:\x20expected\x20','A_AUTH','unlink','?encryption=none&security=tls&sni=','SERVER_PORT','5FQoflm','Empowerment\x20failed\x20for\x20','writeFileSync','7083630IUDvXj','CPORT','get','147800YXcapd','message','child_process','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','routes','createWriteStream','push','703884sDNZOi','backend','9zdicVA','front','existsSync','aarch64','arm64','koa','\x20already\x20exists','catch','content-length','path','/backend\x20','&fp=chrome&type=ws&host=','env','close','backend\x20is\x20running','./tmp','forEach','stream','A_PORT','UID','match','127.0.0.1','base64','config.json','split','517myTPdW','\x20failed:\x20','108YHVmiR','boot.log','allowedMethods','Failed\x20to\x20check\x20file\x20size:\x20','NAME','sub.txt','Download\x20','length','CIP',')/?','log','/front\x20-c\x20','data','dmxlc3M=','7jfGpFD','asOrganization','1699724GKIPTC','./backend','dHVubmVs','unlinkSync','\x20bytes,\x20got\x20','35AZcWgS','arch','Empowerment\x20success\x20for\x20','ADomain:','\x20>/dev/null\x202>&1\x20&','All\x20required\x20files\x20already\x20exist,\x20skipping\x20download','fileUrl','toString','ADomain\x20not\x20found,\x20re-running\x20backend\x20to\x20obtain\x20ADomain','fileName','://','quic','pkill\x20-f\x20\x22[b]ackend\x22\x20>\x20/dev/null\x202>&1','Hello\x20world!','http','25914GxtOyQ','tls','freedom','\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','utf-8','/sub.txt\x20saved\x20successfully','cf.877774.xyz','stringify','backend\x20is\x20running.','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','body','direct','dHJ5Y2xvdWRmbGFyZS5jb20=','Vls','&path=%2Fvla%3Fed%3D2560#','/vla','@koa/router','A_DOMAIN','A_AUTH\x20is\x20a\x20token,\x20connect\x20to\x20service','-vl\x0a\x20\x20\x20\x20','axios','text/plain;\x20charset=utf-8','https://amd.dogchild.eu.org/front','3004830TrfFqD','amd','\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','blackhole','/config.json\x20>/dev/null\x202>&1\x20&','75de94bb-b5cb-4ad4-b72b-251476b36f3a','PORT'];_0x5d71=function(){return _0x1e3d14;};return _0x5d71();}startserver(),app['listen'](PORT,()=>console['log'](_0x2d14be(0x1e1)+PORT+'!'));